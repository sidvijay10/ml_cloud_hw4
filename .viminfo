# This viminfo file was generated by Vim 9.0.
# You may edit it if you're careful!

# Viminfo version
|1,4

# Value of 'encoding' when this file was written
*encoding=utf-8


# hlsearch on (H) or off (h):
~h
# Command Line History (newest to oldest):
:wq
|2,0,1713643334,,"wq"
:q!
|2,0,1713643164,,"q!"
:q
|2,0,1713639539,,"q"

# Search String History (newest to oldest):

# Expression History (newest to oldest):

# Input Line History (newest to oldest):

# Debug Line History (newest to oldest):

# Registers:
""1	LINE	0
	from flask import Flask, request, jsonify
|3,1,1,1,1,0,1713643294,"from flask import Flask, request, jsonify"
"2	LINE	0
	app = Flask(__name__)
|3,0,2,1,1,0,1713643265,"app = Flask(__name__)"
"3	LINE	0
	# infer_mnist.py
	from flask import Flask, request, jsonify
	import torch
	from torchvision import transforms
	from PIL import Image
	import io
	
	# Define the Flask application
	app = Flask(__name__)
	
	# Define the Classifier class (as defined in your training script)
	class Classifier(nn.Module):
	    def __init__(self):
	        super(Classifier, self).__init__()
	        # Your model architecture (same as the training)
	        self.fc1 = nn.Linear(784, 256)
	        self.fc2 = nn.Linear(256, 128)
	        self.fc3 = nn.Linear(128, 64)
	        self.fc4 = nn.Linear(64, 10)
	
	    def forward(self, x):
	        # Flatten the image
	        x = x.view(x.shape[0], -1)
	        x = F.relu(self.fc1(x))
	        x = F.relu(self.fc2(x))
	        x = F.relu(self.fc3(x))
	        x = F.log_softmax(self.fc4(x), dim=1)
	        return x
	
	# Initialize the model and load the saved weights
	model = Classifier()
	model_path = '/mnt/mnist_model/mnist.pth'  # Ensure this is the path where your model is saved
	model.load_state_dict(torch.load(model_path, map_location=torch.device('cpu')))
	model.eval()
	
	# Define a transform to normalize the data for inference
	transform = transforms.Compose([
	    transforms.Grayscale(num_output_channels=1),  # MNIST is grayscale
	    transforms.Resize((28, 28)),  # Resize the image to 28x28 as expected by the model
	    transforms.ToTensor(),  # Convert the image to a torch tensor
	    transforms.Normalize((0.5,), (0.5,))  # Normalize the image
	])
	
	# Define the route for inference
	@app.route('/predict', methods=['POST'])
	def predict():
	    if request.method == 'POST':
	        if 'image' not in request.files:
	            return jsonify({'error': 'No image file provided.'}), 400
	        image_file = request.files['image']
|3,0,3,1,50,0,1713639502,"# infer_mnist.py","from flask import Flask, request, jsonify","import torch","from torchvision import transforms","from PIL import Image","import io","","# Define the Flask application","app = Flask(__name__)","","# Define the Classifier class (as defined in your training script)","class Classifier(nn.Module):","    def __init__(self):","        super(Classifier, self).__init__()",>58
|<"        # Your model architecture (same as the training)","        self.fc1 = nn.Linear(784, 256)","        self.fc2 = nn.Linear(256, 128)","        self.fc3 = nn.Linear(128, 64)","        self.fc4 = nn.Linear(64, 10)","","    def forward(self, x):","        # Flatten the image","        x = x.view(x.shape[0], -1)","        x = F.relu(self.fc1(x))","        x = F.relu(self.fc2(x))","        x = F.relu(self.fc3(x))","        x = F.log_softmax(self.fc4(x), dim=1)","        return x","",>51
|<"# Initialize the model and load the saved weights","model = Classifier()","model_path = '/mnt/mnist_model/mnist.pth'  # Ensure this is the path where your model is saved","model.load_state_dict(torch.load(model_path, map_location=torch.device('cpu')))","model.eval()","","# Define a transform to normalize the data for inference","transform = transforms.Compose([","    transforms.Grayscale(num_output_channels=1),  # MNIST is grayscale",>88
|<"    transforms.Resize((28, 28)),  # Resize the image to 28x28 as expected by the model","    transforms.ToTensor(),  # Convert the image to a torch tensor","    transforms.Normalize((0.5,), (0.5,))  # Normalize the image","])","","# Define the route for inference","@app.route('/predict', methods=['POST'])","def predict():","    if request.method == 'POST':","        if 'image' not in request.files:","            return jsonify({'error': 'No image file provided.'}), 400",>45
|<"        image_file = request.files['image']"

# File marks:
'0  14  8  ~/inference/infer_mnist.py
|4,48,14,8,1713643334,"~/inference/infer_mnist.py"
'1  3  0  ~/inference/infer_mnist.py
|4,49,3,0,1713643303,"~/inference/infer_mnist.py"
'2  3  0  ~/inference/infer_mnist.py
|4,50,3,0,1713643303,"~/inference/infer_mnist.py"
'3  61  0  ~/inference/infer_mnist.py
|4,51,61,0,1713643247,"~/inference/infer_mnist.py"
'4  59  0  ~/inference/infer_mnist.py
|4,52,59,0,1713643247,"~/inference/infer_mnist.py"
'5  60  0  ~/inference/infer_mnist.py
|4,53,60,0,1713643247,"~/inference/infer_mnist.py"
'6  58  0  ~/inference/infer_mnist.py
|4,54,58,0,1713643247,"~/inference/infer_mnist.py"
'7  18  0  ~/inference/templates/index.html
|4,55,18,0,1713643177,"~/inference/templates/index.html"
'8  30  0  ~/inference/templates/index.html
|4,56,30,0,1713643164,"~/inference/templates/index.html"
'9  13  0  ~/inference/templates/index.html
|4,57,13,0,1713643164,"~/inference/templates/index.html"

# Jumplist (newest first):
-'  14  8  ~/inference/infer_mnist.py
|4,39,14,8,1713643334,"~/inference/infer_mnist.py"
-'  3  0  ~/inference/infer_mnist.py
|4,39,3,0,1713643318,"~/inference/infer_mnist.py"
-'  3  0  ~/inference/infer_mnist.py
|4,39,3,0,1713643303,"~/inference/infer_mnist.py"
-'  61  0  ~/inference/infer_mnist.py
|4,39,61,0,1713643254,"~/inference/infer_mnist.py"
-'  60  0  ~/inference/infer_mnist.py
|4,39,60,0,1713643254,"~/inference/infer_mnist.py"
-'  59  0  ~/inference/infer_mnist.py
|4,39,59,0,1713643247,"~/inference/infer_mnist.py"
-'  58  0  ~/inference/infer_mnist.py
|4,39,58,0,1713643247,"~/inference/infer_mnist.py"
-'  32  0  ~/inference/infer_mnist.py
|4,39,32,0,1713643208,"~/inference/infer_mnist.py"
-'  30  0  ~/inference/infer_mnist.py
|4,39,30,0,1713643208,"~/inference/infer_mnist.py"
-'  31  0  ~/inference/infer_mnist.py
|4,39,31,0,1713643208,"~/inference/infer_mnist.py"
-'  29  0  ~/inference/infer_mnist.py
|4,39,29,0,1713643208,"~/inference/infer_mnist.py"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  18  0  ~/inference/templates/index.html
|4,39,18,0,1713643177,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643166,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  30  0  ~/inference/templates/index.html
|4,39,30,0,1713643164,"~/inference/templates/index.html"
-'  13  0  ~/inference/templates/index.html
|4,39,13,0,1713643164,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  1  0  ~/inference/templates/index.html
|4,39,1,0,1713643158,"~/inference/templates/index.html"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  17  0  ~/inference/static/app.js
|4,39,17,0,1713643111,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"
-'  1  0  ~/inference/static/app.js
|4,39,1,0,1713643108,"~/inference/static/app.js"

# History of marks within files (newest to oldest):

> ~/inference/infer_mnist.py
	*	1713643333	0
	"	14	8
	^	14	9
	.	14	8
	+	1	16
	+	87	38
	+	62	0
	+	60	45
	+	62	0
	+	13	73
	+	14	0
	+	10	0
	+	3	9
	+	4	0
	+	10	26
	+	14	8

> ~/inference/templates/index.html
	*	1713643174	0
	"	18	0
	^	18	0
	.	17	7
	+	29	38
	+	17	7

> ~/inference/static/app.js
	*	1713643110	0
	"	17	0
	^	17	0
	.	16	3
	+	16	3

> ~/inference/mnist-inference-service.yaml
	*	1713638510	0
	"	13	0
	^	13	0
	.	12	20
	+	12	20

> ~/inference/mnist-inference-deployment.yaml
	*	1713633014	0
	"	25	35
	^	25	36
	.	25	35
	+	25	35

> ~/inference/Dockerfile
	*	1713632958	0
	"	9	36
	^	9	37
	.	9	36
	+	9	36

> ~/training/train_mnist.py
	*	1713632358	0
	"	67	36
	^	67	37
	.	67	36
	+	67	36

> ~/training/mnist-training-job.yaml
	*	1713632305	0
	"	19	16
	^	19	17
	.	19	16
	+	19	16

> ~/training/mnist-pvc.yaml
	*	1713632289	0
	"	11	27
	^	11	28
	.	11	27
	+	11	27

> ~/training/Dockerfile
	*	1713632249	0
	"	13	31
	^	13	32
	.	13	31
	+	13	31
